 AS V1.42 Beta [Bld 111] - source file Z80 Driver.asm - page 1 - 8/18/2019 20:17:03


       1/       0 :                     ; ---------------------------------------------------------------------------
       2/       0 :                     ; Ancient Music Driver -MD- Z80 Program Version 1.00.
       3/       0 :                     ; Copyright (C) 1993-1994 Ancient corp., Programmed By Hideki Koyama.
       4/       0 :                     ; ---------------------------------------------------------------------------
       5/       0 :                     
       6/       0 : =$5A                DAC_Bank_Offset:			equ ($2D0000>>15)
       7/       0 :                     
       8/       0 :                     ; =============== S U B R O U T I N E =======================================
       9/       0 :                     
      10/       0 :                     DAC_Driver:
      11/       0 :                     		!org	0
      12/       0 :                     		CPU Z80
      13/       0 :                     		listing on
      14/       0 : C3 D8 02            		jp	DAC_Driver_Init
      15/       3 :                     ; ---------------------------------------------------------------------------
      16/       3 : 00                  byte_3:	db 0
      17/       4 : 00                  byte_4:	db 0
      18/       5 : 00                  byte_5:	db 0
      19/       6 : 00                  byte_6:	db 0
      20/       7 : 03 00 01 02 06 0C   byte_7:	db 3, 0, 1, 2, 6, 0Ch, 18h, 30h, 60h, 0A0h, 0D0h, 0E8h
                    18 30 60 A0 D0 E8 
      21/      13 : F4 FA FE FF         		db 0F4h, 0FAh, 0FEh, 0FFh
      22/      17 :                     z80_stack_top:	ds 2C1h
      23/     2D8 :                     z80_stack:
      24/     2D8 :                     
      25/     2D8 :                     ; =============== S U B R O U T I N E =======================================
      26/     2D8 :                     
      27/     2D8 :                     DAC_Driver_Init:
      28/     2D8 : F3                  		di
      29/     2D9 : 31 D8 02            		ld	sp, z80_stack
      30/     2DC : CD 66 06            		call	LoadBank
      31/     2DF : FD 21 00 40         		ld	iy, 4000h
      32/     2E3 :                     
      33/     2E3 :                     loc_2E8:
      34/     2E3 : CD 38 06            		call	sub_678
      35/     2E6 : AF                  		xor	a
      36/     2E7 : 32 03 00            		ld	(byte_3), a
      37/     2EA : 32 04 00            		ld	(byte_4), a
      38/     2ED : 32 05 00            		ld	(byte_5), a
      39/     2F0 : 32 06 00            		ld	(byte_6), a
      40/     2F3 : 47                  		ld	b, a
      41/     2F4 : 4F                  		ld	c, a
      42/     2F5 : D9                  		exx
      43/     2F6 :                     
      44/     2F6 :                     loc_2FB:
      45/     2F6 : 3A 03 00            		ld	a, (byte_3)
      46/     2F9 : B7                  		or	a
      47/     2FA : 20 1A               		jr	nz, loc_31C
      48/     2FC : CD 13 05            		call	sub_54B
      49/     2FF : CD 13 05            		call	sub_54B
      50/     302 : CD 13 05            		call	sub_54B
      51/     305 : 3A 04 00            		ld	a, (byte_4)
      52/     308 : B7                  		or	a
      53/     309 : 20 1F               		jr	nz, loc_331
      54/     30B :                     
      55/     30B :                     loc_310:
      56/     30B : CD 13 05            		call	sub_54B
      57/     30E : CD 13 05            		call	sub_54B
      58/     311 : CD 13 05            		call	sub_54B
      59/     314 : 18 E0               		jr	loc_2FB
 AS V1.42 Beta [Bld 111] - source file Z80 Driver.asm - page 2 - 8/18/2019 20:17:03


      60/     316 :                     ; ---------------------------------------------------------------------------
      61/     316 :                     
      62/     316 :                     loc_31C:
      63/     316 : CB 47               		bit	0, a
      64/     318 : C4 77 06            		call	nz, sub_6DC
      65/     31B : CB 4F               		bit	1, a
      66/     31D : C4 A5 06            		call	nz, sub_70A
      67/     320 : CB 7F               		bit	7, a
      68/     322 : 20 BF               		jr	nz, loc_2E8
      69/     324 : AF                  		xor	a
      70/     325 : 32 03 00            		ld	(byte_3), a
      71/     328 : 18 CC               		jr	loc_2FB
      72/     32A :                     ; ---------------------------------------------------------------------------
      73/     32A :                     
      74/     32A :                     loc_331:
      75/     32A : 21 17 00            		ld	hl, 17h
      76/     32D : DD 21 02 40         		ld	ix, 4002h
      77/     331 : CD 24 04            		call	sub_430
      78/     334 : DD 21 00 40         		ld	ix, 4000h
      79/     338 : CD 58 03            		call	sub_360
      80/     33B : CD 58 03            		call	sub_360
      81/     33E : CD 58 03            		call	sub_360
      82/     341 : DD 21 02 40         		ld	ix, 4002h
      83/     345 : CD 58 03            		call	sub_360
      84/     348 : CD 58 03            		call	sub_360
      85/     34B : DD 21 00 40         		ld	ix, 4000h
      86/     34F : CD 58 03            		call	sub_360
      87/     352 : AF                  		xor	a
      88/     353 : 32 04 00            		ld	(byte_4), a
      89/     356 : 18 B3               		jr	loc_310
      90/     358 :                     ; End of function DAC_Driver
      91/     358 :                     
      92/     358 :                     ; =============== S U B R O U T I N E =======================================
      93/     358 :                     
      94/     358 :                     sub_360:
      95/     358 : 7E                  		ld	a, (hl)
      96/     359 : 23                  		inc	hl
      97/     35A : FE FF               		cp	0FFh
      98/     35C : 20 07               		jr	nz, loc_36D
      99/     35E : CD 13 05            		call	sub_54B
     100/     361 : CD 13 05            		call	sub_54B
     101/     364 : C9                  		ret
     102/     365 :                     ; ---------------------------------------------------------------------------
     103/     365 :                     
     104/     365 :                     loc_36D:
     105/     365 : B7                  		or	a
     106/     366 : 28 0A               		jr	z, loc_37B
     107/     368 : FE 01               		cp	1
     108/     36A : 28 2F               		jr	z, loc_3A5
     109/     36C : FE 02               		cp	2
     110/     36E : 28 5B               		jr	z, loc_3D7
     111/     370 : 18 41               		jr	loc_3BE
     112/     372 :                     ; ---------------------------------------------------------------------------
     113/     372 :                     
     114/     372 :                     loc_37B:
     115/     372 : CD 13 05            		call	sub_54B
     116/     375 : CD 13 05            		call	sub_54B
     117/     378 : CD 13 05            		call	sub_54B
     118/     37B :                     
     119/     37B :                     loc_384:
 AS V1.42 Beta [Bld 111] - source file Z80 Driver.asm - page 3 - 8/18/2019 20:17:03


     120/     37B : FD CB 00 7E         		bit	7, (iy+0)
     121/     37F : 20 FA               		jr	nz, loc_384
     122/     381 : FD 36 00 28         		ld	(iy+0),	28h
     123/     385 : 7E                  		ld	a, (hl)
     124/     386 : 23                  		inc	hl
     125/     387 :                     
     126/     387 :                     loc_390:
     127/     387 : FD CB 00 7E         		bit	7, (iy+0)
     128/     38B : 20 FA               		jr	nz, loc_390
     129/     38D : FD 77 01            		ld	(iy+1),	a
     130/     390 : CD 13 05            		call	sub_54B
     131/     393 : CD 13 05            		call	sub_54B
     132/     396 : CD 13 05            		call	sub_54B
     133/     399 : 18 BD               		jr	sub_360
     134/     39B :                     ; ---------------------------------------------------------------------------
     135/     39B :                     
     136/     39B :                     loc_3A5:
     137/     39B : 7E                  		ld	a, (hl)
     138/     39C : 23                  		inc	hl
     139/     39D :                     
     140/     39D :                     loc_3A7:
     141/     39D : FD CB 00 7E         		bit	7, (iy+0)
     142/     3A1 : 20 FA               		jr	nz, loc_3A7
     143/     3A3 : DD 77 00            		ld	(ix+0),	a
     144/     3A6 : 7E                  		ld	a, (hl)
     145/     3A7 : 23                  		inc	hl
     146/     3A8 :                     
     147/     3A8 :                     loc_3B2:
     148/     3A8 : FD CB 00 7E         		bit	7, (iy+0)
     149/     3AC : 20 FA               		jr	nz, loc_3B2
     150/     3AE : DD 77 01            		ld	(ix+1),	a
     151/     3B1 : 18 A5               		jr	sub_360
     152/     3B3 :                     ; ---------------------------------------------------------------------------
     153/     3B3 :                     
     154/     3B3 :                     loc_3BE:
     155/     3B3 : 7E                  		ld	a, (hl)
     156/     3B4 : 23                  		inc	hl
     157/     3B5 :                     
     158/     3B5 :                     loc_3C0:
     159/     3B5 : FD CB 00 7E         		bit	7, (iy+0)
     160/     3B9 : 20 FA               		jr	nz, loc_3C0
     161/     3BB : FD 77 00            		ld	(iy+0),	a
     162/     3BE : 7E                  		ld	a, (hl)
     163/     3BF : 23                  		inc	hl
     164/     3C0 :                     
     165/     3C0 :                     loc_3CB:
     166/     3C0 : FD CB 00 7E         		bit	7, (iy+0)
     167/     3C4 : 20 FA               		jr	nz, loc_3CB
     168/     3C6 : FD 77 01            		ld	(iy+1),	a
     169/     3C9 : 18 8D               		jr	sub_360
     170/     3CB :                     ; ---------------------------------------------------------------------------
     171/     3CB :                     
     172/     3CB :                     loc_3D7:
     173/     3CB : CD 13 05            		call	sub_54B
     174/     3CE : CD 13 05            		call	sub_54B
     175/     3D1 : CD 13 05            		call	sub_54B
     176/     3D4 : CD 13 05            		call	sub_54B
     177/     3D7 : CD 13 05            		call	sub_54B
     178/     3DA : CD 13 05            		call	sub_54B
     179/     3DD : 7E                  		ld	a, (hl)
 AS V1.42 Beta [Bld 111] - source file Z80 Driver.asm - page 4 - 8/18/2019 20:17:03


     180/     3DE : 23                  		inc	hl
     181/     3DF : 06 18               		ld	b, 18h
     182/     3E1 :                     
     183/     3E1 :                     loc_3ED:
     184/     3E1 : FD CB 00 7E         		bit	7, (iy+0)
     185/     3E5 : 20 FA               		jr	nz, loc_3ED
     186/     3E7 : DD 77 00            		ld	(ix+0),	a
     187/     3EA : 56                  		ld	d, (hl)
     188/     3EB : 23                  		inc	hl
     189/     3EC :                     
     190/     3EC :                     loc_3F8:
     191/     3EC : FD CB 00 7E         		bit	7, (iy+0)
     192/     3F0 : 20 FA               		jr	nz, loc_3F8
     193/     3F2 : DD 72 01            		ld	(ix+1),	d
     194/     3F5 : C6 04               		add	a, 4
     195/     3F7 : 10 E8               		djnz	loc_3ED
     196/     3F9 : C6 20               		add	a, 20h
     197/     3FB :                     
     198/     3FB :                     loc_407:
     199/     3FB : FD CB 00 7E         		bit	7, (iy+0)
     200/     3FF : 20 FA               		jr	nz, loc_407
     201/     401 : DD 77 00            		ld	(ix+0),	a
     202/     404 : 56                  		ld	d, (hl)
     203/     405 : 23                  		inc	hl
     204/     406 :                     
     205/     406 :                     loc_412:
     206/     406 : FD CB 00 7E         		bit	7, (iy+0)
     207/     40A : 20 FA               		jr	nz, loc_412
     208/     40C : DD 72 01            		ld	(ix+1),	d
     209/     40F : CD 13 05            		call	sub_54B
     210/     412 : CD 13 05            		call	sub_54B
     211/     415 : CD 13 05            		call	sub_54B
     212/     418 : CD 13 05            		call	sub_54B
     213/     41B : CD 13 05            		call	sub_54B
     214/     41E : CD 13 05            		call	sub_54B
     215/     421 : C3 58 03            		jp	sub_360
     216/     424 :                     ; End of function sub_360
     217/     424 :                     
     218/     424 :                     ; =============== S U B R O U T I N E =======================================
     219/     424 :                     
     220/     424 :                     sub_430:
     221/     424 : 7E                  		ld	a, (hl)
     222/     425 : 23                  		inc	hl
     223/     426 : FE FF               		cp	0FFh
     224/     428 : 20 01               		jr	nz, loc_437
     225/     42A : C9                  		ret
     226/     42B :                     ; ---------------------------------------------------------------------------
     227/     42B :                     
     228/     42B :                     loc_437:
     229/     42B : FE 10               		cp	10h
     230/     42D : 28 3A               		jr	z, loc_478
     231/     42F : FE 11               		cp	11h
     232/     431 : 28 41               		jr	z, loc_484
     233/     433 : FE 01               		cp	1
     234/     435 : 28 02               		jr	z, loc_446
     235/     437 : 18 18               		jr	loc_45F
     236/     439 :                     ; ---------------------------------------------------------------------------
     237/     439 :                     
     238/     439 :                     loc_446:
     239/     439 : 7E                  		ld	a, (hl)
 AS V1.42 Beta [Bld 111] - source file Z80 Driver.asm - page 5 - 8/18/2019 20:17:03


     240/     43A : 23                  		inc	hl
     241/     43B :                     
     242/     43B :                     loc_448:
     243/     43B : FD CB 00 7E         		bit	7, (iy+0)
     244/     43F : 20 FA               		jr	nz, loc_448
     245/     441 : DD 77 00            		ld	(ix+0),	a
     246/     444 : 7E                  		ld	a, (hl)
     247/     445 : 23                  		inc	hl
     248/     446 :                     
     249/     446 :                     loc_453:
     250/     446 : FD CB 00 7E         		bit	7, (iy+0)
     251/     44A : 20 FA               		jr	nz, loc_453
     252/     44C : DD 77 01            		ld	(ix+1),	a
     253/     44F : 18 D3               		jr	sub_430
     254/     451 :                     ; ---------------------------------------------------------------------------
     255/     451 :                     
     256/     451 :                     loc_45F:
     257/     451 : 7E                  		ld	a, (hl)
     258/     452 : 23                  		inc	hl
     259/     453 :                     
     260/     453 :                     loc_461:
     261/     453 : FD CB 00 7E         		bit	7, (iy+0)
     262/     457 : 20 FA               		jr	nz, loc_461
     263/     459 : FD 77 00            		ld	(iy+0),	a
     264/     45C : 7E                  		ld	a, (hl)
     265/     45D : 23                  		inc	hl
     266/     45E :                     
     267/     45E :                     loc_46C:
     268/     45E : FD CB 00 7E         		bit	7, (iy+0)
     269/     462 : 20 FA               		jr	nz, loc_46C
     270/     464 : FD 77 01            		ld	(iy+1),	a
     271/     467 : 18 BB               		jr	sub_430
     272/     469 :                     ; ---------------------------------------------------------------------------
     273/     469 :                     
     274/     469 :                     loc_478:
     275/     469 : CD 13 05            		call	sub_54B
     276/     46C : CD 13 05            		call	sub_54B
     277/     46F : CD 7F 04            		call	PlaySample_490
     278/     472 : 18 B0               		jr	sub_430
     279/     474 :                     ; ---------------------------------------------------------------------------
     280/     474 :                     
     281/     474 :                     loc_484:
     282/     474 : CD 13 05            		call	sub_54B
     283/     477 : CD 13 05            		call	sub_54B
     284/     47A : CD C1 04            		call	PlaySample_4E5
     285/     47D : 18 A5               		jr	sub_430
     286/     47F :                     ; End of function sub_430
     287/     47F :                     
     288/     47F :                     ; =============== S U B R O U T I N E =======================================
     289/     47F :                     
     290/     47F :                     PlaySample_490:
     291/     47F : 7E                  		ld	a, (hl)
     292/     480 : 23                  		inc	hl
     293/     481 : FE 60               		cp	60h
     294/     483 : 30 3B               		jr	nc, locret_4E4
     295/     485 : E5                  		push	hl
     296/     486 : E5                  		push	hl
     297/     487 : 08                  		ex	af, af'
     298/     488 : CD 66 06            		call	LoadBank
     299/     48B : 08                  		ex	af, af'
 AS V1.42 Beta [Bld 111] - source file Z80 Driver.asm - page 6 - 8/18/2019 20:17:03


     300/     48C : 26 80               		ld	h, 80h
     301/     48E : 87                  		add	a, a
     302/     48F : 87                  		add	a, a
     303/     490 : 6F                  		ld	l, a
     304/     491 : 5E                  		ld	e, (hl)
     305/     492 : 23                  		inc	hl
     306/     493 : 56                  		ld	d, (hl)
     307/     494 : 7B                  		ld	a, e
     308/     495 : B2                  		or	d
     309/     496 : 28 1A               		jr	z, loc_4D6
     310/     498 : 23                  		inc	hl
     311/     499 : 4E                  		ld	c, (hl)
     312/     49A : 23                  		inc	hl
     313/     49B : 46                  		ld	b, (hl)
     314/     49C : EB                  		ex	de, hl
     315/     49D : 16 80               		ld	d, 80h
     316/     49F : D9                  		exx
     317/     4A0 : 21 1D 05            		ld	hl, sub_555
     318/     4A3 : 22 19 05            		ld	(loc_550+1), hl
     319/     4A6 : E1                  		pop	hl
     320/     4A7 : E1                  		pop	hl
     321/     4A8 : CD 13 05            		call	sub_54B
     322/     4AB : CD 13 05            		call	sub_54B
     323/     4AE : CD 13 05            		call	sub_54B
     324/     4B1 : C9                  		ret
     325/     4B2 :                     ; ---------------------------------------------------------------------------
     326/     4B2 :                     
     327/     4B2 :                     loc_4D6:
     328/     4B2 : E1                  		pop	hl
     329/     4B3 : CD 66 06            		call	LoadBank
     330/     4B6 : E1                  		pop	hl
     331/     4B7 : CD 13 05            		call	sub_54B
     332/     4BA : CD 13 05            		call	sub_54B
     333/     4BD : CD 13 05            		call	sub_54B
     334/     4C0 :                     
     335/     4C0 :                     locret_4E4:
     336/     4C0 : C9                  		ret
     337/     4C1 :                     ; End of function PlaySample_490
     338/     4C1 :                     
     339/     4C1 :                     ; =============== S U B R O U T I N E =======================================
     340/     4C1 :                     
     341/     4C1 :                     PlaySample_4E5:
     342/     4C1 : 7E                  		ld	a, (hl)
     343/     4C2 : 23                  		inc	hl
     344/     4C3 : FE 60               		cp	60h
     345/     4C5 : 30 47               		jr	nc, loc_546
     346/     4C7 : E5                  		push	hl
     347/     4C8 : E5                  		push	hl
     348/     4C9 : 08                  		ex	af, af'
     349/     4CA : CD 66 06            		call	LoadBank
     350/     4CD : 08                  		ex	af, af'
     351/     4CE : 26 80               		ld	h, 80h
     352/     4D0 : 87                  		add	a, a
     353/     4D1 : 87                  		add	a, a
     354/     4D2 : 6F                  		ld	l, a
     355/     4D3 : 5E                  		ld	e, (hl)
     356/     4D4 : 23                  		inc	hl
     357/     4D5 : 56                  		ld	d, (hl)
     358/     4D6 : 7B                  		ld	a, e
     359/     4D7 : B2                  		or	d
 AS V1.42 Beta [Bld 111] - source file Z80 Driver.asm - page 7 - 8/18/2019 20:17:03


     360/     4D8 : 28 26               		jr	z, loc_538
     361/     4DA : 23                  		inc	hl
     362/     4DB : 4E                  		ld	c, (hl)
     363/     4DC : 23                  		inc	hl
     364/     4DD : 46                  		ld	b, (hl)
     365/     4DE : EB                  		ex	de, hl
     366/     4DF : 16 80               		ld	d, 80h
     367/     4E1 : D9                  		exx
     368/     4E2 : CD 4F 06            		call	sub_68F
     369/     4E5 : 21 97 05            		ld	hl, sub_5D5
     370/     4E8 : 22 19 05            		ld	(loc_550+1), hl
     371/     4EB : E1                  		pop	hl
     372/     4EC : E1                  		pop	hl
     373/     4ED : 3E FF               		ld	a, 0FFh
     374/     4EF : 32 06 00            		ld	(byte_6), a
     375/     4F2 : AF                  		xor	a
     376/     4F3 : 32 05 00            		ld	(byte_5), a
     377/     4F6 : CD 13 05            		call	sub_54B
     378/     4F9 : CD 13 05            		call	sub_54B
     379/     4FC : CD 13 05            		call	sub_54B
     380/     4FF : C9                  		ret
     381/     500 :                     ; ---------------------------------------------------------------------------
     382/     500 :                     
     383/     500 :                     loc_538:
     384/     500 : E1                  		pop	hl
     385/     501 : CD 66 06            		call	LoadBank
     386/     504 : E1                  		pop	hl
     387/     505 : CD 13 05            		call	sub_54B
     388/     508 : CD 13 05            		call	sub_54B
     389/     50B : CD 13 05            		call	sub_54B
     390/     50E :                     
     391/     50E :                     loc_546:
     392/     50E : AF                  		xor	a
     393/     50F : 32 05 00            		ld	(byte_5), a
     394/     512 : C9                  		ret
     395/     513 :                     ; End of function PlaySample_4E5
     396/     513 :                     
     397/     513 :                     ; =============== S U B R O U T I N E =======================================
     398/     513 :                     
     399/     513 :                     sub_54B:
     400/     513 : D9                  		exx
     401/     514 : 79                  		ld	a, c
     402/     515 : B0                  		or	b
     403/     516 : 28 03               		jr	z, loc_553
     404/     518 :                     
     405/     518 :                     loc_550:
     406/     518 : C3 00 00            		jp	DAC_Driver
     407/     51B :                     ; ---------------------------------------------------------------------------
     408/     51B :                     
     409/     51B :                     loc_553:
     410/     51B : D9                  		exx
     411/     51C : C9                  		ret
     412/     51D :                     ; End of function sub_54B
     413/     51D :                     
     414/     51D :                     ; =============== S U B R O U T I N E =======================================
     415/     51D :                     
     416/     51D :                     sub_555:
     417/     51D : 7E                  		ld	a, (hl)
     418/     51E : E6 F0               		and	0F0h
     419/     520 : 20 24               		jr	nz, loc_581
 AS V1.42 Beta [Bld 111] - source file Z80 Driver.asm - page 8 - 8/18/2019 20:17:03


     420/     522 : 3E 03               		ld	a, 3
     421/     524 : 32 33 05            		ld	(loc_56B+1), a
     422/     527 : E5                  		push	hl
     423/     528 : 21 2F 05            		ld	hl, loc_568
     424/     52B : 22 19 05            		ld	(loc_550+1), hl
     425/     52E : E1                  		pop	hl
     426/     52F :                     
     427/     52F :                     loc_568:
     428/     52F : CD 21 06            		call	sub_661
     429/     532 :                     
     430/     532 :                     loc_56B:
     431/     532 : 3E 00               		ld	a, 0
     432/     534 : 3D                  		dec	a
     433/     535 : 28 05               		jr	z, loc_576
     434/     537 : 32 33 05            		ld	(loc_56B+1), a
     435/     53A : 18 DF               		jr	loc_553
     436/     53C :                     ; ---------------------------------------------------------------------------
     437/     53C :                     
     438/     53C :                     loc_576:
     439/     53C : E5                  		push	hl
     440/     53D : 21 60 05            		ld	hl, sub_59C
     441/     540 : 22 19 05            		ld	(loc_550+1), hl
     442/     543 : E1                  		pop	hl
     443/     544 : 18 D5               		jr	loc_553
     444/     546 :                     ; ---------------------------------------------------------------------------
     445/     546 :                     
     446/     546 :                     loc_581:
     447/     546 : 0F                  		rrca
     448/     547 : 0F                  		rrca
     449/     548 : 0F                  		rrca
     450/     549 : 0F                  		rrca
     451/     54A : C6 07               		add	a, 7
     452/     54C : 32 50 05            		ld	(loc_58A+1), a
     453/     54F :                     
     454/     54F :                     loc_58A:
     455/     54F : 3A 07 00            		ld	a, (byte_7)
     456/     552 : 5F                  		ld	e, a
     457/     553 : CD 22 06            		call	loc_662
     458/     556 : E5                  		push	hl
     459/     557 : 21 60 05            		ld	hl, sub_59C
     460/     55A : 22 19 05            		ld	(loc_550+1), hl
     461/     55D : E1                  		pop	hl
     462/     55E : 18 BB               		jr	loc_553
     463/     560 :                     ; End of function sub_555
     464/     560 :                     
     465/     560 :                     ; =============== S U B R O U T I N E =======================================
     466/     560 :                     
     467/     560 :                     sub_59C:
     468/     560 : 7E                  		ld	a, (hl)
     469/     561 : E6 0F               		and	0Fh
     470/     563 : 20 1A               		jr	nz, loc_5BC
     471/     565 : 3E 03               		ld	a, 3
     472/     567 : 32 76 05            		ld	(loc_5B1+1), a
     473/     56A : E5                  		push	hl
     474/     56B : 21 72 05            		ld	hl, loc_5AE
     475/     56E : 22 19 05            		ld	(loc_550+1), hl
     476/     571 : E1                  		pop	hl
     477/     572 :                     
     478/     572 :                     loc_5AE:
     479/     572 : CD 21 06            		call	sub_661
 AS V1.42 Beta [Bld 111] - source file Z80 Driver.asm - page 9 - 8/18/2019 20:17:03


     480/     575 :                     
     481/     575 :                     loc_5B1:
     482/     575 : 3E 00               		ld	a, 0
     483/     577 : 3D                  		dec	a
     484/     578 : 28 11               		jr	z, loc_5C8
     485/     57A : 32 76 05            		ld	(loc_5B1+1), a
     486/     57D : 18 9C               		jr	loc_553
     487/     57F :                     ; ---------------------------------------------------------------------------
     488/     57F :                     
     489/     57F :                     loc_5BC:
     490/     57F : C6 07               		add	a, 7
     491/     581 : 32 85 05            		ld	(loc_5C1+1), a
     492/     584 :                     
     493/     584 :                     loc_5C1:
     494/     584 : 3A 07 00            		ld	a, (byte_7)
     495/     587 : 5F                  		ld	e, a
     496/     588 : CD 22 06            		call	loc_662
     497/     58B :                     
     498/     58B :                     loc_5C8:
     499/     58B : 23                  		inc	hl
     500/     58C : 0B                  		dec	bc
     501/     58D : E5                  		push	hl
     502/     58E : 21 1D 05            		ld	hl, sub_555
     503/     591 : 22 19 05            		ld	(loc_550+1), hl
     504/     594 : E1                  		pop	hl
     505/     595 : 18 84               		jr	loc_553
     506/     597 :                     ; End of function sub_59C
     507/     597 :                     
     508/     597 :                     ; =============== S U B R O U T I N E =======================================
     509/     597 :                     
     510/     597 :                     sub_5D5:
     511/     597 : 7E                  		ld	a, (hl)
     512/     598 : E6 F0               		and	0F0h
     513/     59A : 20 26               		jr	nz, loc_601
     514/     59C : 3E 03               		ld	a, 3
     515/     59E : 32 AD 05            		ld	(loc_5EB+1), a
     516/     5A1 : E5                  		push	hl
     517/     5A2 : 21 A9 05            		ld	hl, loc_5E8
     518/     5A5 : 22 19 05            		ld	(loc_550+1), hl
     519/     5A8 : E1                  		pop	hl
     520/     5A9 :                     
     521/     5A9 :                     loc_5E8:
     522/     5A9 : CD 21 06            		call	sub_661
     523/     5AC :                     
     524/     5AC :                     loc_5EB:
     525/     5AC : 3E 00               		ld	a, 0
     526/     5AE : 3D                  		dec	a
     527/     5AF : 28 06               		jr	z, loc_5F6
     528/     5B1 : 32 AD 05            		ld	(loc_5EB+1), a
     529/     5B4 : C3 1B 05            		jp	loc_553
     530/     5B7 :                     ; ---------------------------------------------------------------------------
     531/     5B7 :                     
     532/     5B7 :                     loc_5F6:
     533/     5B7 : E5                  		push	hl
     534/     5B8 : 21 DD 05            		ld	hl, sub_61C
     535/     5BB : 22 19 05            		ld	(loc_550+1), hl
     536/     5BE : E1                  		pop	hl
     537/     5BF : C3 1B 05            		jp	loc_553
     538/     5C2 :                     ; ---------------------------------------------------------------------------
     539/     5C2 :                     
 AS V1.42 Beta [Bld 111] - source file Z80 Driver.asm - page 10 - 8/18/2019 20:17:03


     540/     5C2 :                     loc_601:
     541/     5C2 : 0F                  		rrca
     542/     5C3 : 0F                  		rrca
     543/     5C4 : 0F                  		rrca
     544/     5C5 : 0F                  		rrca
     545/     5C6 : C6 07               		add	a, 7
     546/     5C8 : 32 CC 05            		ld	(loc_60A+1), a
     547/     5CB :                     
     548/     5CB :                     loc_60A:
     549/     5CB : 3A 07 00            		ld	a, (byte_7)
     550/     5CE : 5F                  		ld	e, a
     551/     5CF : CD 22 06            		call	loc_662
     552/     5D2 : E5                  		push	hl
     553/     5D3 : 21 DD 05            		ld	hl, sub_61C
     554/     5D6 : 22 19 05            		ld	(loc_550+1), hl
     555/     5D9 : E1                  		pop	hl
     556/     5DA : C3 1B 05            		jp	loc_553
     557/     5DD :                     ; End of function sub_5D5
     558/     5DD :                     
     559/     5DD :                     ; =============== S U B R O U T I N E =======================================
     560/     5DD :                     
     561/     5DD :                     sub_61C:
     562/     5DD : 7E                  		ld	a, (hl)
     563/     5DE : E6 0F               		and	0Fh
     564/     5E0 : 20 1B               		jr	nz, loc_63C
     565/     5E2 : 3E 03               		ld	a, 3
     566/     5E4 : 32 F3 05            		ld	(loc_631+1), a
     567/     5E7 : E5                  		push	hl
     568/     5E8 : 21 EF 05            		ld	hl, loc_62E
     569/     5EB : 22 19 05            		ld	(loc_550+1), hl
     570/     5EE : E1                  		pop	hl
     571/     5EF :                     
     572/     5EF :                     loc_62E:
     573/     5EF : CD 21 06            		call	sub_661
     574/     5F2 :                     
     575/     5F2 :                     loc_631:
     576/     5F2 : 3E 00               		ld	a, 0
     577/     5F4 : 3D                  		dec	a
     578/     5F5 : 28 12               		jr	z, loc_648
     579/     5F7 : 32 F3 05            		ld	(loc_631+1), a
     580/     5FA : C3 1B 05            		jp	loc_553
     581/     5FD :                     ; ---------------------------------------------------------------------------
     582/     5FD :                     
     583/     5FD :                     loc_63C:
     584/     5FD : C6 07               		add	a, 7
     585/     5FF : 32 03 06            		ld	(loc_641+1), a
     586/     602 :                     
     587/     602 :                     loc_641:
     588/     602 : 3A 07 00            		ld	a, (byte_7)
     589/     605 : 5F                  		ld	e, a
     590/     606 : CD 22 06            		call	loc_662
     591/     609 :                     
     592/     609 :                     loc_648:
     593/     609 : 23                  		inc	hl
     594/     60A : 0B                  		dec	bc
     595/     60B : 78                  		ld	a, b
     596/     60C : B1                  		or	c
     597/     60D : 28 0B               		jr	z, loc_65A
     598/     60F : E5                  		push	hl
     599/     610 : 21 97 05            		ld	hl, sub_5D5
 AS V1.42 Beta [Bld 111] - source file Z80 Driver.asm - page 11 - 8/18/2019 20:17:03


     600/     613 : 22 19 05            		ld	(loc_550+1), hl
     601/     616 : E1                  		pop	hl
     602/     617 : C3 1B 05            		jp	loc_553
     603/     61A :                     ; ---------------------------------------------------------------------------
     604/     61A :                     
     605/     61A :                     loc_65A:
     606/     61A : AF                  		xor	a
     607/     61B : 32 06 00            		ld	(byte_6), a
     608/     61E : C3 1B 05            		jp	loc_553
     609/     621 :                     ; End of function sub_61C
     610/     621 :                     
     611/     621 :                     ; =============== S U B R O U T I N E =======================================
     612/     621 :                     
     613/     621 :                     sub_661:
     614/     621 : 7B                  		ld	a, e
     615/     622 :                     
     616/     622 :                     loc_662:
     617/     622 : FD CB 00 7E         		bit	7, (iy+0)
     618/     626 : 20 FA               		jr	nz, loc_662
     619/     628 : FD 36 00 2A         		ld	(iy+0),	2Ah
     620/     62C : 82                  		add	a, d
     621/     62D : 57                  		ld	d, a
     622/     62E :                     
     623/     62E :                     loc_66E:
     624/     62E : FD CB 00 7E         		bit	7, (iy+0)
     625/     632 : 20 FA               		jr	nz, loc_66E
     626/     634 : FD 77 01            		ld	(iy+1),	a
     627/     637 : C9                  		ret
     628/     638 :                     ; End of function sub_661
     629/     638 :                     
     630/     638 :                     ; =============== S U B R O U T I N E =======================================
     631/     638 :                     
     632/     638 :                     sub_678:
     633/     638 : FD CB 00 7E         		bit	7, (iy+0)
     634/     63C : 20 FA               		jr	nz, sub_678
     635/     63E : FD 36 00 2B         		ld	(iy+0),	2Bh
     636/     642 : 00                  		nop
     637/     643 : 00                  		nop
     638/     644 :                     
     639/     644 :                     loc_684:
     640/     644 : FD CB 00 7E         		bit	7, (iy+0)
     641/     648 : 20 FA               		jr	nz, loc_684
     642/     64A : FD 36 01 80         		ld	(iy+1),	80h
     643/     64E : C9                  		ret
     644/     64F :                     ; End of function sub_678
     645/     64F :                     
     646/     64F :                     ; =============== S U B R O U T I N E =======================================
     647/     64F :                     
     648/     64F :                     sub_68F:
     649/     64F : FD CB 00 7E         		bit	7, (iy+0)
     650/     653 : 20 FA               		jr	nz, sub_68F
     651/     655 : FD 36 02 B6         		ld	(iy+2),	0B6h
     652/     659 : 00                  		nop
     653/     65A : 00                  		nop
     654/     65B :                     
     655/     65B :                     loc_69B:
     656/     65B : FD CB 00 7E         		bit	7, (iy+0)
     657/     65F : 20 FA               		jr	nz, loc_69B
     658/     661 : FD 36 03 C0         		ld	(iy+3),	0C0h
     659/     665 : C9                  		ret
 AS V1.42 Beta [Bld 111] - source file Z80 Driver.asm - page 12 - 8/18/2019 20:17:03


     660/     666 :                     ; End of function sub_68F
     661/     666 :                     
     662/     666 :                     ; =============== S U B R O U T I N E =======================================
     663/     666 :                     
     664/     666 :                     LoadBank:
     665/     666 : 3E 00               		ld	a, 0
     666/     668 : 06 07               		ld	b, 7
     667/     66A : 3E 5A               		ld	a, DAC_Bank_Offset
     668/     66C : 21 00 60            		ld	hl, 6000h
     669/     66F :                     
     670/     66F : 77                  -		ld	(hl), a
     671/     670 : 0F                  		rrca
     672/     671 : 10 FC               		djnz	-
     673/     673 : 77                  		ld	(hl), a
     674/     674 : AF                  		xor	a
     675/     675 : 77                  		ld	(hl), a
     676/     676 : C9                  		ret
     677/     677 :                     ; End of function LoadBank
     678/     677 :                     
     679/     677 :                     ; =============== S U B R O U T I N E =======================================
     680/     677 :                     
     681/     677 :                     sub_6DC:
     682/     677 : 21 00 40            		ld	hl, 4000h
     683/     67A : 06 08               		ld	b, 8
     684/     67C : 16 28               		ld	d, 28h
     685/     67E : 1E 07               		ld	e, 7
     686/     680 :                     
     687/     680 :                     loc_6E5:
     688/     680 : CD AE 06            		call	sub_714
     689/     683 : 1D                  		dec	e
     690/     684 : 10 FA               		djnz	loc_6E5
     691/     686 : 06 0F               		ld	b, 0Fh
     692/     688 : 0E 4E               		ld	c, 4Eh
     693/     68A : 16 8E               		ld	d, 8Eh
     694/     68C : 1E FF               		ld	e, 0FFh
     695/     68E :                     
     696/     68E :                     loc_6F3:
     697/     68E : 21 00 40            		ld	hl, 4000h
     698/     691 : CD AE 06            		call	sub_714
     699/     694 : CD BF 06            		call	sub_725
     700/     697 : 21 02 40            		ld	hl, 4002h
     701/     69A : CD AE 06            		call	sub_714
     702/     69D : CD BF 06            		call	sub_725
     703/     6A0 : 0D                  		dec	c
     704/     6A1 : 15                  		dec	d
     705/     6A2 : 10 EA               		djnz	loc_6F3
     706/     6A4 : C9                  		ret
     707/     6A5 :                     ; End of function sub_6DC
     708/     6A5 :                     
     709/     6A5 :                     ; =============== S U B R O U T I N E =======================================
     710/     6A5 :                     
     711/     6A5 :                     sub_70A:
     712/     6A5 : 21 00 40            		ld	hl, 4000h
     713/     6A8 : 16 22               		ld	d, 22h
     714/     6AA : 1E 00               		ld	e, 0
     715/     6AC : 18 00               		jr	sub_714
     716/     6AE :                     ; End of function sub_70A
     717/     6AE :                     
     718/     6AE :                     ; =============== S U B R O U T I N E =======================================
     719/     6AE :                     
 AS V1.42 Beta [Bld 111] - source file Z80 Driver.asm - page 13 - 8/18/2019 20:17:03


     720/     6AE :                     sub_714:
     721/     6AE : FD CB 00 7E         		bit	7, (iy+0)
     722/     6B2 : 20 FA               		jr	nz, sub_714
     723/     6B4 : 72                  		ld	(hl), d
     724/     6B5 : 23                  		inc	hl
     725/     6B6 :                     
     726/     6B6 :                     loc_71C:
     727/     6B6 : FD CB 00 7E         		bit	7, (iy+0)
     728/     6BA : 20 FA               		jr	nz, loc_71C
     729/     6BC : 73                  		ld	(hl), e
     730/     6BD : 2B                  		dec	hl
     731/     6BE : C9                  		ret
     732/     6BF :                     ; End of function sub_714
     733/     6BF :                     
     734/     6BF :                     ; =============== S U B R O U T I N E =======================================
     735/     6BF :                     
     736/     6BF :                     sub_725:
     737/     6BF : FD CB 00 7E         		bit	7, (iy+0)
     738/     6C3 : 20 FA               		jr	nz, sub_725
     739/     6C5 : 71                  		ld	(hl), c
     740/     6C6 : 23                  		inc	hl
     741/     6C7 :                     
     742/     6C7 :                     loc_72D:
     743/     6C7 : FD CB 00 7E         		bit	7, (iy+0)
     744/     6CB : 20 FA               		jr	nz, loc_72D
     745/     6CD : 73                  		ld	(hl), e
     746/     6CE : 2B                  		dec	hl
     747/     6CF : C9                  		ret
     748/     6D0 :                     ; End of function sub_725
     749/     6D0 :                     
     750/     6D0 :                     ; =============== S U B R O U T I N E =======================================
     751/     6D0 :                     
     752/     6D0 :                     ; end of 'ROM'
     753/     6D0 :                     
     754/     6D0 :                     		END
 AS V1.42 Beta [Bld 111] - source file Z80 Driver.asm - page 14 - 8/18/2019 20:17:03


  symbol table (* = unused):
  ------------------------

*ARCHITECTURE :  i386-unknown-win32 - | *BIGENDIAN :                      0 - |
*BRANCHEXT :                      0 - |  BYTE_3 :                         3 C |
 BYTE_4 :                         4 C |  BYTE_5 :                         5 C |
 BYTE_6 :                         6 C |  BYTE_7 :                         7 C |
*CASESENSITIVE :                  0 - | *CONSTPI :        3.141592653589793 - |
 DAC_BANK_OFFSET :               5A - |  DAC_DRIVER :                     0 C |
 DAC_DRIVER_INIT :              2D8 C | *DATE :                   8/18/2019 - |
*FALSE :                          0 - | *FULLPMMU :                       1 - |
*HAS64 :                          1 - | *HASDSP :                         0 - |
*HASFPU :                         0 - | *HASPMMU :                        0 - |
*INEXTMODE :                      0 - | *INLWORDMODE :                    0 - |
*INMAXMODE :                      0 - | *INSRCMODE :                      0 - |
*INSUPMODE :                      0 - | *LISTON :                         1 - |
 LOADBANK :                     666 C |  LOCRET_4E4 :                   4C0 C |
 LOC_2E8 :                      2E3 C |  LOC_2FB :                      2F6 C |
 LOC_310 :                      30B C |  LOC_31C :                      316 C |
 LOC_331 :                      32A C |  LOC_36D :                      365 C |
 LOC_37B :                      372 C |  LOC_384 :                      37B C |
 LOC_390 :                      387 C |  LOC_3A5 :                      39B C |
 LOC_3A7 :                      39D C |  LOC_3B2 :                      3A8 C |
 LOC_3BE :                      3B3 C |  LOC_3C0 :                      3B5 C |
 LOC_3CB :                      3C0 C |  LOC_3D7 :                      3CB C |
 LOC_3ED :                      3E1 C |  LOC_3F8 :                      3EC C |
 LOC_407 :                      3FB C |  LOC_412 :                      406 C |
 LOC_437 :                      42B C |  LOC_446 :                      439 C |
 LOC_448 :                      43B C |  LOC_453 :                      446 C |
 LOC_45F :                      451 C |  LOC_461 :                      453 C |
 LOC_46C :                      45E C |  LOC_478 :                      469 C |
 LOC_484 :                      474 C |  LOC_4D6 :                      4B2 C |
 LOC_538 :                      500 C |  LOC_546 :                      50E C |
 LOC_550 :                      518 C |  LOC_553 :                      51B C |
 LOC_568 :                      52F C |  LOC_56B :                      532 C |
 LOC_576 :                      53C C |  LOC_581 :                      546 C |
 LOC_58A :                      54F C |  LOC_5AE :                      572 C |
 LOC_5B1 :                      575 C |  LOC_5BC :                      57F C |
 LOC_5C1 :                      584 C |  LOC_5C8 :                      58B C |
 LOC_5E8 :                      5A9 C |  LOC_5EB :                      5AC C |
 LOC_5F6 :                      5B7 C |  LOC_601 :                      5C2 C |
 LOC_60A :                      5CB C |  LOC_62E :                      5EF C |
 LOC_631 :                      5F2 C |  LOC_63C :                      5FD C |
 LOC_641 :                      602 C |  LOC_648 :                      609 C |
 LOC_65A :                      61A C |  LOC_662 :                      622 C |
 LOC_66E :                      62E C |  LOC_684 :                      644 C |
 LOC_69B :                      65B C |  LOC_6E5 :                      680 C |
 LOC_6F3 :                      68E C |  LOC_71C :                      6B6 C |
 LOC_72D :                      6C7 C | *MACEXP :                         1 - |
*MOMCPU :                        80 - | *MOMCPUNAME :                   Z80 - |
*NESTMAX :                      100 - | *PACKING :                        0 - |
*PADDING :                        1 - |  PLAYSAMPLE_490 :               47F C |
 PLAYSAMPLE_4E5 :               4C1 C | *RELAXED :                        0 - |
 SUB_360 :                      358 C |  SUB_430 :                      424 C |
 SUB_54B :                      513 C |  SUB_555 :                      51D C |
 SUB_59C :                      560 C |  SUB_5D5 :                      597 C |
 SUB_61C :                      5DD C |  SUB_661 :                      621 C |
 SUB_678 :                      638 C |  SUB_68F :                      64F C |
 SUB_6DC :                      677 C |  SUB_70A :                      6A5 C |
 SUB_714 :                      6AE C |  SUB_725 :                      6BF C |
 AS V1.42 Beta [Bld 111] - source file Z80 Driver.asm - page 15 - 8/18/2019 20:17:03


*TIME :                    20:17:03 - | *TRUE :                           1 - |
*VERSION :                     142F - |  Z80_STACK :                    2D8 C |
*Z80_STACK_TOP :                 17 C |  __BACK0 :                      66F C |

    120 symbols
     29 unused symbols

 AS V1.42 Beta [Bld 111] - source file Z80 Driver.asm - page 16 - 8/18/2019 20:17:03


  codepages:
  ----------

STANDARD (0 changed characters)


0.02 seconds assembly time

    755 lines source file
      2 passes
      0 errors
      0 warnings
